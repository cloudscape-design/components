/*
 Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 SPDX-License-Identifier: Apache-2.0
*/

@use '../internal/styles' as styles;
@use '../internal/styles/tokens' as awsui;

$body-offset-vertical: calc(#{awsui.$space-s} + #{awsui.$border-field-width});
$body-offset-horizontal: calc(#{awsui.$space-m} + #{awsui.$border-field-width});

.container {
  display: inline-block;
  position: fixed;
  top: -9999px;
  left: -9999px;
  z-index: 2000;
}

.container-body {
  @include styles.styles-reset;
  @include styles.text-flex-wrapping;

  border-radius: awsui.$border-radius-popover;
  padding: awsui.$space-s awsui.$space-m;

  background-color: awsui.$color-background-popover;
  box-shadow: awsui.$shadow-popover;
  border: awsui.$border-field-width solid awsui.$color-border-popover;

  &-overflow-visible {
    overflow: visible;
  }
}

// The content border box needs to be the same as body border box for correct placement computation.
.container-body-content {
  padding: $body-offset-vertical $body-offset-horizontal;
  margin: calc(-1 * #{$body-offset-vertical}) calc(-1 * #{$body-offset-horizontal});
}

.container-body-variant-annotation {
  background-color: awsui.$color-background-status-info;
  border-color: awsui.$color-border-status-info;
}

.container-body-size-small {
  max-width: 210px;
  &.fixed-width {
    width: 210px;
  }
}

.container-body-size-medium {
  max-width: 310px;
  &.fixed-width {
    width: 310px;
  }
}

.container-body-size-large {
  max-width: 480px;
  @media (max-width: 480px) {
    // On viewports smaller than 480px, we default to the body-size-medium width
    max-width: 310px;
  }
  &.fixed-width {
    width: 480px;
  }
}

.container-arrow {
  $arrow-offset: 12px;
  $arrow-width: 20px;
  $arrow-height: $arrow-width * 0.5;

  position: absolute;
  display: inline-block;

  &-position-right-top,
  &-position-right-bottom {
    transform: rotate(-90deg);
    transform-origin: 0 100%;
  }

  &-position-right-top {
    top: calc(#{$arrow-offset} + #{$arrow-height});
    left: 0;
  }

  &-position-right-bottom {
    bottom: $arrow-offset;
    left: 0;
  }

  &-position-left-top,
  &-position-left-bottom {
    transform: rotate(90deg);
    transform-origin: 100% 100%;
  }

  &-position-left-top {
    top: calc(#{$arrow-offset} + #{$arrow-height});
    right: 0;
  }

  &-position-left-bottom {
    bottom: $arrow-offset;
    right: 0;
  }

  &-position-top-center,
  &-position-top-right,
  &-position-top-left,
  &-position-top-responsive {
    transform: rotate(180deg);
    transform-origin: 50% 50%;
  }

  &-position-top-center {
    bottom: -$arrow-width * 0.5;
    left: calc(50% - #{$arrow-height});
  }

  &-position-top-right {
    bottom: -$arrow-width * 0.5;
    left: $arrow-offset;
  }

  &-position-top-left {
    bottom: -$arrow-width * 0.5;
    left: calc(100% - #{$arrow-width} - #{$arrow-offset});
  }

  &-position-bottom-center {
    top: -$arrow-width * 0.5;
    left: calc(50% - #{$arrow-height});
  }

  &-position-bottom-right {
    top: -$arrow-width * 0.5;
    left: $arrow-offset;
  }

  &-position-bottom-left {
    top: -$arrow-width * 0.5;
    left: calc(100% - #{$arrow-width} - #{$arrow-offset});
  }
}
