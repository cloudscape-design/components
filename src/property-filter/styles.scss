/*
 Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 SPDX-License-Identifier: Apache-2.0
*/

@use '../internal/styles/index' as styles;
@use '../internal/styles/tokens' as awsui;

.root {
  @include styles.styles-reset;
}

.search-field {
  display: flex;
  align-items: flex-end;
  // The xs breakpoint, minus the table tools container padding
  max-inline-size: calc(#{styles.$breakpoint-x-small} - 2 * #{awsui.$space-l});
}

.input-wrapper {
  flex-grow: 1;
}

.add-token {
  border-inline-start: 1px solid awsui.$color-border-divider-default;
  box-sizing: border-box;
  margin-inline-start: awsui.$space-m;
  padding-inline-start: awsui.$space-m;
}

.tokens {
  margin-block: awsui.$space-xs;
  margin-inline: 0;
}

.token-operator {
  font-weight: bold;
}

.property-editor,
.token-editor {
  user-select: text;
  margin-block: awsui.$space-xxs;
  margin-inline: awsui.$space-xxs;

  &-form {
    margin-block-end: awsui.$space-scaled-l;
  }

  &-field-property {
    /* used in test-utils */
  }

  &-field-operator {
    margin-block-start: awsui.$space-scaled-l;
  }

  &-field-value {
    margin-block-start: awsui.$space-scaled-l;
  }

  &-cancel {
    margin-inline-end: awsui.$space-xs;
  }

  &-submit {
    /* used in test-utils */
  }

  &-actions {
    display: flex;
    justify-content: flex-end;
    padding-block-start: awsui.$space-s;
    border-block-start: 1px solid #{awsui.$color-border-dropdown-item-default};
  }
}

.token-editor {
  &-actions {
    // The below code cancels horizontal padding of the popover and horizontal margin of the token-editor.
    padding-inline-end: calc(#{awsui.$space-m} + #{awsui.$space-xxs});
    margin-inline: calc(-1 * #{awsui.$space-m} + -1 * #{awsui.$space-xxs});
  }
}

.token-editor-grouped {
  display: flex;
  flex-direction: column;
  gap: awsui.$space-s;
  user-select: text;
  margin-block: awsui.$space-xxs;
  margin-inline: awsui.$space-xxs;

  &-form {
    margin-block-end: awsui.$space-scaled-l;
  }

  &-field-property {
    flex-grow: 2;
  }

  &-field-operator {
    flex-grow: 1;
  }

  &-field-value {
    flex-grow: 2;
  }

  &-cancel {
    margin-inline-end: awsui.$space-xs;
  }

  &-submit {
    /* used in test-utils */
  }

  &-actions {
    display: flex;
    justify-content: flex-end;
    padding-block-start: awsui.$space-s;
    border-block-start: 1px solid #{awsui.$color-border-dropdown-item-default};

    // The below code cancels horizontal padding of the popover and horizontal margin of the token-editor.
    padding-inline-end: calc(#{awsui.$space-m} + #{awsui.$space-xxs});
    margin-inline: calc(-1 * #{awsui.$space-m} + -1 * #{awsui.$space-xxs});
    margin-block-start: awsui.$space-s;
  }

  &-list {
    display: flex;
    flex-direction: column;
    gap: awsui.$space-m;

    &-item {
      display: flex;
      flex-direction: column;
      gap: awsui.$space-xs;
      padding-block-end: awsui.$space-xs;
      border-block-end: 1px solid awsui.$color-border-divider-default;
    }
  }

  &-table {
    @include styles.styles-reset;

    display: table;
    margin-inline: calc(-1 * #{awsui.$space-s});
    border-spacing: awsui.$space-s 0;

    &-row {
      display: table-row;
    }

    &-header-cell,
    &-cell {
      display: table-cell;
      vertical-align: bottom;
    }

    &-header-cell {
      color: awsui.$color-text-column-header;
      font-weight: awsui.$font-weight-heading-s;
      padding-block: awsui.$space-scaled-xxs;
      text-align: start;
    }

    &-cell {
      padding-block-end: awsui.$space-s;
    }

    @media (max-width: 912px) {
      //
    }
  }

  &-operation {
    align-self: flex-start;
  }

  &-add-token {
    // margin-block-start: awsui.$space-xxs;
  }

  &-remove-token {
    align-self: flex-end;
    padding-block-start: awsui.$space-xs;
  }
}

.property-editor {
  padding-block: awsui.$space-m;
  padding-inline: awsui.$space-m;
  overflow-y: auto;
}

.custom-content-wrapper {
  display: contents;
}

.custom-control {
  margin-inline-end: awsui.$space-s;
}

.input {
  flex: 1;
}

.results {
  // Align with the filter input's vertical padding and border sizes.
  padding-block: calc(#{styles.$control-padding-vertical} + #{styles.$control-border-width});
  padding-inline: 0;
}

.token-trigger {
  @include styles.text-wrapping;
}

.remove-all,
.join-operation,
.custom-filter-actions {
  /* used in test-utils */
}

.constraint {
  padding-block-start: awsui.$space-xxs;
  @include styles.form-control-description;
}
